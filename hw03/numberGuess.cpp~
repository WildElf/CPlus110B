// Assignment 3 - Eric Zimmerman
// guesses the number user is thinking of

#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;

/// ************
/// Checks to see if the user wants to repeat the game
/// ************
bool shouldPlayAgain ()
{
	char playAgain;	

	cout << "Do you want to play again? (y/n): ";
	cin >> playAgain;

	if (playAgain == 'y')
		return true;
	else
		return false;
}

/// ***********
/// Show user the guess and get input
/// ***********
char getUserResponseToGuess(int guess)
{
	char choice;

	cout << "Is it " << guess << "? (h/l/c): ";
	cin >> choice;

	return choice;
}

/// ***********
/// Use known highest and lowest numbers
/// to get the next guess
/// **********
int getMidpoint(int low, int high)
{
	int mid = (low + high) / 2;

	return mid;
}

/// ***********
/// Take the number range and
/// get a random midpoint for next guess
/// ***********
int getRandomMidpoint (int low, int high)
{
	int mid = (rand() % (high - low + 1)) + low;

	return mid;
}

/// **********
/// The main function for the number guessing game
/// **********
void playOneGame ()
{
	// variables for numer guessing
	int midpoint, lowpoint, highpoint;
	char choice;

	// random number setup
	unsigned long seed = time(0);
	srand(seed);

	// Establish initial number range
	const int LOW_RANGE = 1;
	const int HIGH_RANGE = 100;

	lowpoint = LOW_RANGE;
	highpoint = HIGH_RANGE;
	
	cout << "Think of a number between " << lowpoint 
		<< " and " << highpoint << ".\n";

	// number guessing loop
	do
	{
		// get a number to guess
		midpoint = getMidpoint(lowpoint, highpoint);

		// get a random number to guess
// disabled	midpoint = getRandomMidpoint(lowpoint, highpoint);

		// get user response to guess
		choice = getUserResponseToGuess(midpoint);

		// adjust guessing range based on user response
		if (choice == 'h')
			lowpoint = midpoint;
		else if (choice == 'l')
			highpoint = midpoint;
		else if (choice == 'c')
			cout << "Awesome!\n";
		else
			cout << "I don't understand what you want from me.\n"
			<< "Enter lowercase H if your number is higher,\n"
			<< "lowercase L if your number is lower, and\n"
			<< "lowercase C if I got your number.\n";

	} while (choice != 'c'); // continue until 'c' for correct
}

/// **********
/// Program starting function
/// **********
int main ()
{
	do
	{
		playOneGame();
	} while (shouldPlayAgain());

	return 0;
}
